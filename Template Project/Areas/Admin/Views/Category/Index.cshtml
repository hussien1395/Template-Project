@model IEnumerable<Category>

<div class="container">

    <div class="row mb-3 align-items-center my-3">

        <div class="col-md-6">
            @*  <div>@TempData["Success"]</div> *@
            <h2 class="display-6">All Categorys</h2>
        </div>
        <div class="col-md-6 text-md-end text-start mt-2 mt-md-0">
            <a href="/Admin/Category/Create" class="btn btn-success">Create</a>
        </div>
    </div>



@* <script>
    document.addEventListener("DOMContentLoaded", function () {
        const deleteButtons = document.querySelectorAll(".btn-delete");

        deleteButtons.forEach(button => {
            button.addEventListener("click", function (e) {
                e.preventDefault(); // stop normal navigation

                const url = this.getAttribute("href");

                Swal.fire({
                    title: "Are you sure?",
                    text: "This action cannot be undone!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#d33",
                    cancelButtonColor: "#3085d6",
                    confirmButtonText: "Yes, delete it!"
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire({
                          title: "Deleted!",
                          text: "Your file has been deleted.",
                          icon: "success"
                        });

                        // Redirect to delete URL
                        window.location.href = url;
                    }
                });
            });
        });
    });
</script>
 *@


<div id="tableExample3" data-list='{"valueNames":["id","name"],"page":5,"pagination":true}'>


    <div class="row justify-content-end g-0">
        <div class="col-auto col-sm-5 mb-3">
            <form>
                <div class="input-group">
                    <input class="form-control form-control-sm shadow-none search" type="search" placeholder="Search..." aria-label="search" />
                    <div class="input-group-text bg-transparent"><span class="fa fa-search fs--1 text-600"></span></div>
                </div>
            </form>
        </div>
    </div>


    <div class="table-responsive scrollbar">
        <table class="table table-bordered table-striped fs--1 mb-0">
            <thead class="bg-200 text-900">
                <tr>
                    <th class="sort" data-sort="id">#</th>
                    <th class="sort" data-sort="name">Name</th>
                    <th>Image</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody class="list">
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="id">@item.Id</td>
                        <td class="name">@item.Name</td>
                        <td>
                            <img src="~/Uploads/Categories/@item.Image" width="50" class="rounded" />
                        </td>

                         @if(User.IsInRole(SData.SUPPER_ADMIN_ROLE) || User.IsInRole(SData.ADMIN_ROLE))
                            {
                                <td class="text-center">
                                    <div class="d-flex justify-content-center gap-2">
                                        <!-- Edit Button -->
                                        <a href="/Admin/Category/Update/@item.Id" class="btn btn-sm btn-warning text-white px-3 py-1 shadow-sm">
                                            <i class="fas fa-edit me-1"></i> Edit
                                        </a>
                                        <!-- Delete Form -->
                                        <form method="post" action="/Admin/Category/Delete/@item.Id" class="d-inline">
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="btn btn-sm btn-danger px-3 py-1 shadow-sm"
                                                    onclick="return confirm('Are you sure you want to delete this movie?');">
                                                <i class="fas fa-trash-alt me-1"></i> Delete
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            }
                            else
                            {
                                <td class="text-center">
                                   No Actions
                                </td>
                            }
                            


                    </tr>
                }
            </tbody>
        </table>
    </div>


    <div class="d-flex justify-content-center mt-3">
        <button class="btn btn-sm btn-falcon-default me-1" type="button" title="Previous" data-list-pagination="prev">
            <span class="fas fa-chevron-left"></span>
        </button>
        <ul class="pagination mb-0"></ul>
        <button class="btn btn-sm btn-falcon-default ms-1" type="button" title="Next" data-list-pagination="next">
            <span class="fas fa-chevron-right"> </span>
        </button>
    </div>

</div>

@section Scripts {


        <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const options = {
                    valueNames: ["id", "name"],
                    page: 5,
                    pagination: true
                };
                new List("tableExample3", options);
            });
        </script>

        <script>
            @if (TempData["Success"] != null)
            {
                    <text>
                        toastr.success('@TempData["Success"]');
                    </text>
            }
        </script>
}



